{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Create Separator Design</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .hidden {
            display: none;
        }

        .form-section {
            margin-top: 30px;
        }

        .toggle-switch-container {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .toggle-switch-container label {
            margin: 0;
        }
    </style>
</head>
<body>
<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">üõ¢Ô∏è Two-Phase Separator</h2>
        <div class="toggle-switch-container">
            <label class="form-label">Vertical</label>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="separatorToggle">
            </div>
            <label class="form-label">Horizontal</label>
        </div>
    </div>

    <form method="POST">
        {% csrf_token %}
        <input type="hidden" name="separator_type" id="separatorType" value="vertical">

        <!-- Design Name -->
        <div class="mb-3">
            <label class="form-label">Design Name</label>
            <input type="text" name="name" class="form-control" required>
        </div>

        <!-- Flow Parameters -->
        <div class="form-section">
            <h5>Flow Parameters</h5>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Gas Flow Rate (Wg) [lb/hr]</label>
                    <input type="number" step="any" name="Wg" class="form-control" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Liquid Flow Rate (Wl) [lb/hr]</label>
                    <input type="number" step="any" name="Wl" class="form-control" required>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Gas Density (Pg) [lb/ft¬≥]</label>
                    <input type="number" step="any" name="Pg" class="form-control" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Liquid Density (Pl) [lb/ft¬≥]</label>
                    <input type="number" step="any" name="Pl" class="form-control" required>
                </div>
            </div>
        </div>

        <!-- Properties -->
        <div class="form-section">
            <h5>Physical Properties</h5>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Gas Viscosity (Ug) [cP]</label>
                    <input type="number" step="any" name="Ug" class="form-control" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Droplet Diameter (dp) [ft]</label>
                    <input type="number" step="any" name="dp" class="form-control" required>
                </div>
            </div>
        </div>

        <!-- Design Parameters -->
        <div class="form-section">
            <h5>Design Parameters</h5>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label class="form-label">Velocity Factor</label>
                    <input type="number" step="any" name="velocity_factor" class="form-control" value="0.75" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Holdup Time [min]</label>
                    <input type="number" name="holdup_time" class="form-control" value="5" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Surge Factor</label>
                    <input type="number" step="any" name="surge_factor" class="form-control" value="1.5" required>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Operating Pressure [psia]</label>
                    <input type="number" step="any" name="pressure" class="form-control" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Mist Eliminator Ring Allowance [ft]</label>
                    <input type="number" step="any" name="mist_eliminator_ring" class="form-control" value="0.5" required>
                </div>
            </div>
        </div>
<!-- Vertical Only Fields -->
<div id="verticalFields" class="form-section">
    <h5>Vertical Specific</h5>
    <div class="row">
        <div class="col-md-6 mb-3">
            <label class="form-label">Inlet Nozzle Diameter (dN) [ft]</label>
            <input type="number" step="any" name="dn" class="form-control" required>
        </div>
        <div class="col-md-6 mb-3">
            <div class="form-check mt-4">
                <input class="form-check-input" type="checkbox" name="inlet_diverter" id="inletDiverter">
                <label class="form-check-label" for="inletDiverter">
                    Inlet Diverter Present
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="mist_eliminator_present" id="mistEliminatorPresent">
                <label class="form-check-label" for="mistEliminatorPresent">
                    Mist Eliminator Installed
                </label>
            </div>
        </div>
    </div>
</div>

        <!-- Horizontal Only Field -->
        <div id="horizontalFields" class="form-section hidden">
            <h5>Horizontal Specific</h5>
            <div class="mb-3">
                <label class="form-label">Length-to-Diameter Ratio (L/D)</label>
                <input type="number" step="any" name="L_D_ratio" class="form-control" value="3.0">
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" name="mist_eliminator_present" id="mistEliminatorPresent">
                <label class="form-check-label" for="mistEliminatorPresent">
                    Mist Eliminator Installed
                </label>
            </div>
        </div>

        <button type="submit" class="btn btn-primary mt-3">Create Design</button>
    </form>
</div>

<script>
    const toggleSwitch = document.getElementById('separatorToggle');
    const separatorTypeInput = document.getElementById('separatorType');
    const horizontalFields = document.getElementById('horizontalFields');
    const verticalFields = document.getElementById('verticalFields');

    toggleSwitch.addEventListener('change', function () {
        if (this.checked) {
            separatorTypeInput.value = 'horizontal';
            horizontalFields.classList.remove('hidden');
            verticalFields.classList.add('hidden');
        } else {
            separatorTypeInput.value = 'vertical';
            horizontalFields.classList.add('hidden');
            verticalFields.classList.remove('hidden');
        }
    });

    // Initialize on load (optional)
    window.addEventListener('DOMContentLoaded', function () {
        if (toggleSwitch.checked) {
            horizontalFields.classList.remove('hidden');
            verticalFields.classList.add('hidden');
        } else {
            horizontalFields.classList.add('hidden');
            verticalFields.classList.remove('hidden');
        }
    });
</script>

</body>
</html>
